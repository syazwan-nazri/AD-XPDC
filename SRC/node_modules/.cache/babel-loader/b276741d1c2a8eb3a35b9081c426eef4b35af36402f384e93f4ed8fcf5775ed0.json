{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport ownerDocument from '@mui/utils/ownerDocument';\nimport useLazyRef from '@mui/utils/useLazyRef';\nimport { useRtl } from '@mui/system/RtlProvider';\nimport { findGridCellElementsFromCol, findGridElement, findLeftPinnedCellsAfterCol, findRightPinnedCellsBeforeCol, getFieldFromHeaderElem, findHeaderElementFromField, getFieldsFromGroupHeaderElem, findGroupHeaderElementsFromField, findGridHeader, findGridCells, findParentElementFromClassName, findLeftPinnedHeadersAfterCol, findRightPinnedHeadersBeforeCol, escapeOperandAttributeSelector } from \"../../../utils/domUtils.js\";\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from \"./gridColumnResizeApi.js\";\nimport { gridClasses } from \"../../../constants/gridClasses.js\";\nimport { useGridEvent, useGridApiMethod, useGridEventPriority, useGridLogger, useGridNativeEventListener, useGridSelector, useOnMount } from \"../../utils/index.js\";\nimport { gridVirtualizationColumnEnabledSelector } from \"../virtualization/index.js\";\nimport { createControllablePromise } from \"../../../utils/createControllablePromise.js\";\nimport { clamp } from \"../../../utils/utils.js\";\nimport { useTimeout } from \"../../utils/useTimeout.js\";\nimport { GridPinnedColumnPosition } from \"../columns/gridColumnsInterfaces.js\";\nimport { gridColumnsStateSelector } from \"../columns/index.js\";\nimport { gridDimensionsSelector } from \"../dimensions/index.js\";\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return Math.round(newWidth);\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(separator, isRtl) {\n  const side = separator.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (isRtl) {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction getPinnedWidthProperty(isRtl, pinnedPosition) {\n  if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n    return isRtl ? '--DataGrid-rightPinnedWidth' : '--DataGrid-leftPinnedWidth';\n  }\n  return isRtl ? '--DataGrid-leftPinnedWidth' : '--DataGrid-rightPinnedWidth';\n}\nfunction getPinnedWidth(dimensions, isRtl, pinnedPosition) {\n  if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n    return isRtl ? dimensions.rightPinnedWidth : dimensions.leftPinnedWidth;\n  }\n  return isRtl ? dimensions.leftPinnedWidth : dimensions.rightPinnedWidth;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef(undefined);\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (for example zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      return cell.getBoundingClientRect().width ?? 0;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        const title = header.querySelector(`.${gridClasses.columnHeaderTitle}`);\n        const content = header.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n        const iconContainer = header.querySelector(`.${gridClasses.iconButtonContainer}`);\n        const menuContainer = header.querySelector(`.${gridClasses.menuIcon}`);\n        const element = title ?? content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = contentWidth + paddingWidth + (iconContainer?.clientWidth ?? 0) + (menuContainer?.clientWidth ?? 0);\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\nfunction createResizeRefs() {\n  return {\n    colDef: undefined,\n    initialColWidth: 0,\n    initialTotalWidth: 0,\n    previousMouseClickEvent: undefined,\n    columnHeaderElement: undefined,\n    headerFilterElement: undefined,\n    groupHeaderElements: [],\n    cellElements: [],\n    leftPinnedCellsAfter: [],\n    rightPinnedCellsBefore: [],\n    fillerLeft: undefined,\n    fillerRight: undefined,\n    leftPinnedHeadersAfter: [],\n    rightPinnedHeadersBefore: []\n  };\n}\n\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const isRtl = useRtl();\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const refs = useLazyRef(createResizeRefs).current;\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef(null);\n  const resizeDirection = React.useRef(null);\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef(undefined);\n  const updateWidth = newWidth => {\n    logger.debug(`Updating width to ${newWidth} for col ${refs.colDef.field}`);\n    const prevWidth = refs.columnHeaderElement.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    const columnWidthDiff = newWidth - refs.initialColWidth;\n    if (columnWidthDiff > 0) {\n      const newTotalWidth = refs.initialTotalWidth + columnWidthDiff;\n      apiRef.current.rootElementRef?.current?.style.setProperty('--DataGrid-rowWidth', `${newTotalWidth}px`);\n    }\n    refs.colDef.computedWidth = newWidth;\n    refs.colDef.width = newWidth;\n    refs.colDef.flex = 0;\n    refs.columnHeaderElement.style.width = `${newWidth}px`;\n    const headerFilterElement = refs.headerFilterElement;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = `${newWidth}px`;\n    }\n    refs.groupHeaderElements.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.width = finalWidth;\n    });\n    refs.cellElements.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.setProperty('--width', finalWidth);\n    });\n    const dimensions = gridDimensionsSelector(apiRef);\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, refs.colDef.field);\n    if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n      updateProperty(refs.fillerLeft, 'width', widthDiff);\n      refs.leftPinnedCellsAfter.forEach(cell => {\n        updateProperty(cell, 'left', widthDiff);\n      });\n      refs.leftPinnedHeadersAfter.forEach(header => {\n        updateProperty(header, 'left', widthDiff);\n      });\n      apiRef.current.rootElementRef?.current?.style.setProperty(getPinnedWidthProperty(isRtl, pinnedPosition), `${getPinnedWidth(dimensions, isRtl, pinnedPosition) + columnWidthDiff}px`);\n    }\n    if (pinnedPosition === GridPinnedColumnPosition.RIGHT) {\n      updateProperty(refs.fillerRight, 'width', widthDiff);\n      refs.rightPinnedCellsBefore.forEach(cell => {\n        updateProperty(cell, 'right', widthDiff);\n      });\n      refs.rightPinnedHeadersBefore.forEach(header => {\n        updateProperty(header, 'right', widthDiff);\n      });\n      apiRef.current.rootElementRef?.current?.style.setProperty(getPinnedWidthProperty(isRtl, pinnedPosition), `${getPinnedWidth(dimensions, isRtl, pinnedPosition) + columnWidthDiff}px`);\n    }\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n\n    // Prevent double-clicks from being interpreted as two separate clicks\n    if (refs.previousMouseClickEvent) {\n      const prevEvent = refs.previousMouseClickEvent;\n      const prevTimeStamp = prevEvent.timeStamp;\n      const prevClientX = prevEvent.clientX;\n      const prevClientY = prevEvent.clientY;\n\n      // Check if the current event is part of a double-click\n      if (nativeEvent.timeStamp - prevTimeStamp < 300 && nativeEvent.clientX === prevClientX && nativeEvent.clientY === prevClientY) {\n        refs.previousMouseClickEvent = undefined;\n        apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n        return;\n      }\n    }\n    if (refs.colDef) {\n      apiRef.current.setColumnWidth(refs.colDef.field, refs.colDef.width);\n      logger.debug(`Updating col ${refs.colDef.field} with new width: ${refs.colDef.width}`);\n\n      // Since during resizing we update the columns width outside of React, React is unable to\n      // reapply the right style properties. We need to sync the state manually.\n      // So we reapply the same logic as in https://github.com/mui/mui-x/blob/0511bf65543ca05d2602a5a3e0a6156f2fc8e759/packages/x-data-grid/src/hooks/features/columnHeaders/useGridColumnHeaders.tsx#L405\n      const columnsState = gridColumnsStateSelector(apiRef);\n      refs.groupHeaderElements.forEach(element => {\n        const fields = getFieldsFromGroupHeaderElem(element);\n        const div = element;\n        const newWidth = fields.reduce((acc, field) => {\n          if (columnsState.columnVisibilityModel[field] !== false) {\n            return acc + columnsState.lookup[field].computedWidth;\n          }\n          return acc;\n        }, 0);\n        const finalWidth = `${newWidth}px`;\n        div.style.width = finalWidth;\n      });\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const storeReferences = (colDef, separator, xStart) => {\n    const root = apiRef.current.rootElementRef.current;\n    refs.initialColWidth = colDef.computedWidth;\n    refs.initialTotalWidth = apiRef.current.getRootDimensions().rowWidth;\n    refs.colDef = colDef;\n    refs.columnHeaderElement = findHeaderElementFromField(apiRef.current.columnHeadersContainerRef.current, colDef.field);\n    const headerFilterElement = root.querySelector(`.${gridClasses.headerFilterRow} [data-field=\"${escapeOperandAttributeSelector(colDef.field)}\"]`);\n    if (headerFilterElement) {\n      refs.headerFilterElement = headerFilterElement;\n    }\n    refs.groupHeaderElements = findGroupHeaderElementsFromField(apiRef.current.columnHeadersContainerRef?.current, colDef.field);\n    refs.cellElements = findGridCellElementsFromCol(refs.columnHeaderElement, apiRef.current);\n    refs.fillerLeft = findGridElement(apiRef.current, isRtl ? 'filler--pinnedRight' : 'filler--pinnedLeft');\n    refs.fillerRight = findGridElement(apiRef.current, isRtl ? 'filler--pinnedLeft' : 'filler--pinnedRight');\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, refs.colDef.field);\n    refs.leftPinnedCellsAfter = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedCellsAfterCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.rightPinnedCellsBefore = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedCellsBeforeCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.leftPinnedHeadersAfter = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedHeadersAfterCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.rightPinnedHeadersBefore = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedHeadersBeforeCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    resizeDirection.current = getResizeDirection(separator, isRtl);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(xStart, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, refs.colDef.minWidth, refs.colDef.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: refs.columnHeaderElement,\n      colDef: refs.colDef,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, refs.colDef.minWidth, refs.colDef.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: refs.columnHeaderElement,\n      colDef: refs.colDef,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    const columnHeaderElement = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(columnHeaderElement);\n    const colDef = apiRef.current.getColumn(field);\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    storeReferences(colDef, cellSeparator, touch.clientX);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (refs.columnHeaderElement) {\n      refs.columnHeaderElement.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, refs, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(({\n    field\n  }) => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback(({\n    colDef\n  }, event) => {\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    storeReferences(colDef, event.currentTarget, event.clientX);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    refs.previousMouseClickEvent = event.nativeEvent;\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      disableColumnVirtualization: false,\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    const root = apiRef.current.rootElementRef?.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: userOptions?.columns ?? state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      if (!props.disableVirtualization && options.disableColumnVirtualization) {\n        apiRef.current.unstable_setColumnVirtualization(false);\n        await columnVirtualizationDisabled();\n      }\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field],\n        flex: 0\n      }));\n      if (options.expand) {\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => total + (widthByField[column.field] ?? column.computedWidth ?? column.width), 0);\n        const dimensions = apiRef.current.getRootDimensions();\n        const availableWidth = dimensions.viewportInnerSize.width;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n      newColumns.forEach((newColumn, index) => {\n        if (newColumn.width !== columns[index].width) {\n          const width = newColumn.width;\n          apiRef.current.publishEvent('columnWidthChange', {\n            element: apiRef.current.getColumnHeaderElement(newColumn.field),\n            colDef: newColumn,\n            width\n          });\n        }\n      });\n    } finally {\n      if (!props.disableVirtualization) {\n        apiRef.current.unstable_setColumnVirtualization(true);\n      }\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled, props.disableVirtualization]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => apiRef.current.columnHeadersContainerRef?.current, 'touchstart', handleTouchStart, {\n    passive: true\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridEvent(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridEvent(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridEvent(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridEvent(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridEventPriority(apiRef, 'columnResize', props.onColumnResize);\n  useGridEventPriority(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};\nfunction updateProperty(element, property, delta) {\n  if (!element) {\n    return;\n  }\n  element.style[property] = `${Math.round(parseFloat(element.style[property])) + delta}px`;\n}","map":{"version":3,"names":["_extends","React","useEventCallback","ownerDocument","useLazyRef","useRtl","findGridCellElementsFromCol","findGridElement","findLeftPinnedCellsAfterCol","findRightPinnedCellsBeforeCol","getFieldFromHeaderElem","findHeaderElementFromField","getFieldsFromGroupHeaderElem","findGroupHeaderElementsFromField","findGridHeader","findGridCells","findParentElementFromClassName","findLeftPinnedHeadersAfterCol","findRightPinnedHeadersBeforeCol","escapeOperandAttributeSelector","DEFAULT_GRID_AUTOSIZE_OPTIONS","gridClasses","useGridEvent","useGridApiMethod","useGridEventPriority","useGridLogger","useGridNativeEventListener","useGridSelector","useOnMount","gridVirtualizationColumnEnabledSelector","createControllablePromise","clamp","useTimeout","GridPinnedColumnPosition","gridColumnsStateSelector","gridDimensionsSelector","trackFinger","event","currentTouchId","undefined","changedTouches","i","length","touch","identifier","x","clientX","y","clientY","computeNewWidth","initialOffsetToSeparator","clickX","columnBounds","resizeDirection","newWidth","left","right","Math","round","computeOffsetToSeparator","flipResizeDirection","side","getResizeDirection","separator","isRtl","classList","contains","getPinnedWidthProperty","pinnedPosition","LEFT","getPinnedWidth","dimensions","rightPinnedWidth","leftPinnedWidth","preventClick","preventDefault","stopImmediatePropagation","useColumnVirtualizationDisabled","apiRef","promise","useRef","selector","value","useEffect","current","resolve","asyncCheck","Promise","excludeOutliers","inputValues","factor","values","slice","sort","a","b","q1","floor","q3","iqr","deviation","filter","v","extractColumnWidths","options","columns","widthByField","root","rootElementRef","add","autosizing","forEach","column","cells","field","widths","map","cell","getBoundingClientRect","width","filteredWidths","includeOutliers","outliersFactor","includeHeaders","header","title","querySelector","columnHeaderTitle","content","columnHeaderTitleContainerContent","iconContainer","iconButtonContainer","menuContainer","menuIcon","element","style","window","getComputedStyle","paddingWidth","parseInt","paddingLeft","paddingRight","contentWidth","scrollWidth","clientWidth","push","hasColumnMin","minWidth","Infinity","hasColumnMax","maxWidth","min","max","maxContent","remove","columnResizeStateInitializer","state","columnResize","resizingColumnField","createResizeRefs","colDef","initialColWidth","initialTotalWidth","previousMouseClickEvent","columnHeaderElement","headerFilterElement","groupHeaderElements","cellElements","leftPinnedCellsAfter","rightPinnedCellsBefore","fillerLeft","fillerRight","leftPinnedHeadersAfter","rightPinnedHeadersBefore","useGridColumnResize","props","logger","refs","stopResizeEventTimeout","touchId","updateWidth","debug","prevWidth","offsetWidth","widthDiff","columnWidthDiff","newTotalWidth","setProperty","computedWidth","flex","div","finalWidth","getAttribute","unstable_applyPipeProcessors","updateProperty","RIGHT","finishResize","nativeEvent","stopListening","prevEvent","prevTimeStamp","timeStamp","prevClientX","prevClientY","publishEvent","setColumnWidth","columnsState","fields","reduce","acc","columnVisibilityModel","lookup","start","storeReferences","xStart","getRootDimensions","rowWidth","columnHeadersContainerRef","headerFilterRow","handleResizeMouseUp","handleResizeMouseMove","buttons","params","handleTouchEnd","finger","handleTouchMove","type","handleTouchStart","cellSeparator","target","columnHeader","getColumn","doc","currentTarget","addEventListener","useCallback","body","removeProperty","removeEventListener","setTimeout","pointerEvents","handleResizeStart","setState","handleResizeStop","handleColumnResizeMouseDown","button","cursor","handleColumnSeparatorDoubleClick","disableAutosize","resizable","autosizeColumns","autosizeOptions","disableColumnVirtualization","columnVirtualizationDisabled","isAutosizingRef","userOptions","orderedFields","c","disableVirtualization","unstable_setColumnVirtualization","newColumns","expand","visibleColumns","totalWidth","total","availableWidth","viewportInnerSize","remainingWidth","widthPerColumn","updateColumns","newColumn","index","getColumnHeaderElement","autosizeOnMount","then","passive","onColumnResize","onColumnWidthChange","property","delta","parseFloat"],"sources":["C:/Users/ammar/Documents/GitHub/AD-XPDC/SRC/node_modules/@mui/x-data-grid/esm/hooks/features/columnResize/useGridColumnResize.js"],"sourcesContent":["'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport ownerDocument from '@mui/utils/ownerDocument';\nimport useLazyRef from '@mui/utils/useLazyRef';\nimport { useRtl } from '@mui/system/RtlProvider';\nimport { findGridCellElementsFromCol, findGridElement, findLeftPinnedCellsAfterCol, findRightPinnedCellsBeforeCol, getFieldFromHeaderElem, findHeaderElementFromField, getFieldsFromGroupHeaderElem, findGroupHeaderElementsFromField, findGridHeader, findGridCells, findParentElementFromClassName, findLeftPinnedHeadersAfterCol, findRightPinnedHeadersBeforeCol, escapeOperandAttributeSelector } from \"../../../utils/domUtils.js\";\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from \"./gridColumnResizeApi.js\";\nimport { gridClasses } from \"../../../constants/gridClasses.js\";\nimport { useGridEvent, useGridApiMethod, useGridEventPriority, useGridLogger, useGridNativeEventListener, useGridSelector, useOnMount } from \"../../utils/index.js\";\nimport { gridVirtualizationColumnEnabledSelector } from \"../virtualization/index.js\";\nimport { createControllablePromise } from \"../../../utils/createControllablePromise.js\";\nimport { clamp } from \"../../../utils/utils.js\";\nimport { useTimeout } from \"../../utils/useTimeout.js\";\nimport { GridPinnedColumnPosition } from \"../columns/gridColumnsInterfaces.js\";\nimport { gridColumnsStateSelector } from \"../columns/index.js\";\nimport { gridDimensionsSelector } from \"../dimensions/index.js\";\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return Math.round(newWidth);\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(separator, isRtl) {\n  const side = separator.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (isRtl) {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction getPinnedWidthProperty(isRtl, pinnedPosition) {\n  if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n    return isRtl ? '--DataGrid-rightPinnedWidth' : '--DataGrid-leftPinnedWidth';\n  }\n  return isRtl ? '--DataGrid-leftPinnedWidth' : '--DataGrid-rightPinnedWidth';\n}\nfunction getPinnedWidth(dimensions, isRtl, pinnedPosition) {\n  if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n    return isRtl ? dimensions.rightPinnedWidth : dimensions.leftPinnedWidth;\n  }\n  return isRtl ? dimensions.leftPinnedWidth : dimensions.rightPinnedWidth;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef(undefined);\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (for example zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      return cell.getBoundingClientRect().width ?? 0;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        const title = header.querySelector(`.${gridClasses.columnHeaderTitle}`);\n        const content = header.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n        const iconContainer = header.querySelector(`.${gridClasses.iconButtonContainer}`);\n        const menuContainer = header.querySelector(`.${gridClasses.menuIcon}`);\n        const element = title ?? content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = contentWidth + paddingWidth + (iconContainer?.clientWidth ?? 0) + (menuContainer?.clientWidth ?? 0);\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\nfunction createResizeRefs() {\n  return {\n    colDef: undefined,\n    initialColWidth: 0,\n    initialTotalWidth: 0,\n    previousMouseClickEvent: undefined,\n    columnHeaderElement: undefined,\n    headerFilterElement: undefined,\n    groupHeaderElements: [],\n    cellElements: [],\n    leftPinnedCellsAfter: [],\n    rightPinnedCellsBefore: [],\n    fillerLeft: undefined,\n    fillerRight: undefined,\n    leftPinnedHeadersAfter: [],\n    rightPinnedHeadersBefore: []\n  };\n}\n\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const isRtl = useRtl();\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const refs = useLazyRef(createResizeRefs).current;\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef(null);\n  const resizeDirection = React.useRef(null);\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef(undefined);\n  const updateWidth = newWidth => {\n    logger.debug(`Updating width to ${newWidth} for col ${refs.colDef.field}`);\n    const prevWidth = refs.columnHeaderElement.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    const columnWidthDiff = newWidth - refs.initialColWidth;\n    if (columnWidthDiff > 0) {\n      const newTotalWidth = refs.initialTotalWidth + columnWidthDiff;\n      apiRef.current.rootElementRef?.current?.style.setProperty('--DataGrid-rowWidth', `${newTotalWidth}px`);\n    }\n    refs.colDef.computedWidth = newWidth;\n    refs.colDef.width = newWidth;\n    refs.colDef.flex = 0;\n    refs.columnHeaderElement.style.width = `${newWidth}px`;\n    const headerFilterElement = refs.headerFilterElement;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = `${newWidth}px`;\n    }\n    refs.groupHeaderElements.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.width = finalWidth;\n    });\n    refs.cellElements.forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.setProperty('--width', finalWidth);\n    });\n    const dimensions = gridDimensionsSelector(apiRef);\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, refs.colDef.field);\n    if (pinnedPosition === GridPinnedColumnPosition.LEFT) {\n      updateProperty(refs.fillerLeft, 'width', widthDiff);\n      refs.leftPinnedCellsAfter.forEach(cell => {\n        updateProperty(cell, 'left', widthDiff);\n      });\n      refs.leftPinnedHeadersAfter.forEach(header => {\n        updateProperty(header, 'left', widthDiff);\n      });\n      apiRef.current.rootElementRef?.current?.style.setProperty(getPinnedWidthProperty(isRtl, pinnedPosition), `${getPinnedWidth(dimensions, isRtl, pinnedPosition) + columnWidthDiff}px`);\n    }\n    if (pinnedPosition === GridPinnedColumnPosition.RIGHT) {\n      updateProperty(refs.fillerRight, 'width', widthDiff);\n      refs.rightPinnedCellsBefore.forEach(cell => {\n        updateProperty(cell, 'right', widthDiff);\n      });\n      refs.rightPinnedHeadersBefore.forEach(header => {\n        updateProperty(header, 'right', widthDiff);\n      });\n      apiRef.current.rootElementRef?.current?.style.setProperty(getPinnedWidthProperty(isRtl, pinnedPosition), `${getPinnedWidth(dimensions, isRtl, pinnedPosition) + columnWidthDiff}px`);\n    }\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n\n    // Prevent double-clicks from being interpreted as two separate clicks\n    if (refs.previousMouseClickEvent) {\n      const prevEvent = refs.previousMouseClickEvent;\n      const prevTimeStamp = prevEvent.timeStamp;\n      const prevClientX = prevEvent.clientX;\n      const prevClientY = prevEvent.clientY;\n\n      // Check if the current event is part of a double-click\n      if (nativeEvent.timeStamp - prevTimeStamp < 300 && nativeEvent.clientX === prevClientX && nativeEvent.clientY === prevClientY) {\n        refs.previousMouseClickEvent = undefined;\n        apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n        return;\n      }\n    }\n    if (refs.colDef) {\n      apiRef.current.setColumnWidth(refs.colDef.field, refs.colDef.width);\n      logger.debug(`Updating col ${refs.colDef.field} with new width: ${refs.colDef.width}`);\n\n      // Since during resizing we update the columns width outside of React, React is unable to\n      // reapply the right style properties. We need to sync the state manually.\n      // So we reapply the same logic as in https://github.com/mui/mui-x/blob/0511bf65543ca05d2602a5a3e0a6156f2fc8e759/packages/x-data-grid/src/hooks/features/columnHeaders/useGridColumnHeaders.tsx#L405\n      const columnsState = gridColumnsStateSelector(apiRef);\n      refs.groupHeaderElements.forEach(element => {\n        const fields = getFieldsFromGroupHeaderElem(element);\n        const div = element;\n        const newWidth = fields.reduce((acc, field) => {\n          if (columnsState.columnVisibilityModel[field] !== false) {\n            return acc + columnsState.lookup[field].computedWidth;\n          }\n          return acc;\n        }, 0);\n        const finalWidth = `${newWidth}px`;\n        div.style.width = finalWidth;\n      });\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const storeReferences = (colDef, separator, xStart) => {\n    const root = apiRef.current.rootElementRef.current;\n    refs.initialColWidth = colDef.computedWidth;\n    refs.initialTotalWidth = apiRef.current.getRootDimensions().rowWidth;\n    refs.colDef = colDef;\n    refs.columnHeaderElement = findHeaderElementFromField(apiRef.current.columnHeadersContainerRef.current, colDef.field);\n    const headerFilterElement = root.querySelector(`.${gridClasses.headerFilterRow} [data-field=\"${escapeOperandAttributeSelector(colDef.field)}\"]`);\n    if (headerFilterElement) {\n      refs.headerFilterElement = headerFilterElement;\n    }\n    refs.groupHeaderElements = findGroupHeaderElementsFromField(apiRef.current.columnHeadersContainerRef?.current, colDef.field);\n    refs.cellElements = findGridCellElementsFromCol(refs.columnHeaderElement, apiRef.current);\n    refs.fillerLeft = findGridElement(apiRef.current, isRtl ? 'filler--pinnedRight' : 'filler--pinnedLeft');\n    refs.fillerRight = findGridElement(apiRef.current, isRtl ? 'filler--pinnedLeft' : 'filler--pinnedRight');\n    const pinnedPosition = apiRef.current.unstable_applyPipeProcessors('isColumnPinned', false, refs.colDef.field);\n    refs.leftPinnedCellsAfter = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedCellsAfterCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.rightPinnedCellsBefore = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedCellsBeforeCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.leftPinnedHeadersAfter = pinnedPosition !== GridPinnedColumnPosition.LEFT ? [] : findLeftPinnedHeadersAfterCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    refs.rightPinnedHeadersBefore = pinnedPosition !== GridPinnedColumnPosition.RIGHT ? [] : findRightPinnedHeadersBeforeCol(apiRef.current, refs.columnHeaderElement, isRtl);\n    resizeDirection.current = getResizeDirection(separator, isRtl);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(xStart, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, refs.colDef.minWidth, refs.colDef.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: refs.columnHeaderElement,\n      colDef: refs.colDef,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, refs.columnHeaderElement.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, refs.colDef.minWidth, refs.colDef.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: refs.columnHeaderElement,\n      colDef: refs.colDef,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    const columnHeaderElement = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(columnHeaderElement);\n    const colDef = apiRef.current.getColumn(field);\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    storeReferences(colDef, cellSeparator, touch.clientX);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (refs.columnHeaderElement) {\n      refs.columnHeaderElement.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, refs, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(({\n    field\n  }) => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback(({\n    colDef\n  }, event) => {\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    storeReferences(colDef, event.currentTarget, event.clientX);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    refs.previousMouseClickEvent = event.nativeEvent;\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      disableColumnVirtualization: false,\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    const root = apiRef.current.rootElementRef?.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: userOptions?.columns ?? state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      if (!props.disableVirtualization && options.disableColumnVirtualization) {\n        apiRef.current.unstable_setColumnVirtualization(false);\n        await columnVirtualizationDisabled();\n      }\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field],\n        flex: 0\n      }));\n      if (options.expand) {\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => total + (widthByField[column.field] ?? column.computedWidth ?? column.width), 0);\n        const dimensions = apiRef.current.getRootDimensions();\n        const availableWidth = dimensions.viewportInnerSize.width;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n      newColumns.forEach((newColumn, index) => {\n        if (newColumn.width !== columns[index].width) {\n          const width = newColumn.width;\n          apiRef.current.publishEvent('columnWidthChange', {\n            element: apiRef.current.getColumnHeaderElement(newColumn.field),\n            colDef: newColumn,\n            width\n          });\n        }\n      });\n    } finally {\n      if (!props.disableVirtualization) {\n        apiRef.current.unstable_setColumnVirtualization(true);\n      }\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled, props.disableVirtualization]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => apiRef.current.columnHeadersContainerRef?.current, 'touchstart', handleTouchStart, {\n    passive: true\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridEvent(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridEvent(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridEvent(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridEvent(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridEventPriority(apiRef, 'columnResize', props.onColumnResize);\n  useGridEventPriority(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};\nfunction updateProperty(element, property, delta) {\n  if (!element) {\n    return;\n  }\n  element.style[property] = `${Math.round(parseFloat(element.style[property])) + delta}px`;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}