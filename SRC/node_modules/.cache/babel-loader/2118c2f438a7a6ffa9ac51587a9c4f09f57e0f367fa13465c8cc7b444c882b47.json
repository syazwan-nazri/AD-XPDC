{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"skipCache\", \"keepChildrenExpanded\"];\nimport * as React from 'react';\nimport useLazyRef from '@mui/utils/useLazyRef';\nimport debounce from '@mui/utils/debounce';\nimport { warnOnce } from '@mui/x-internals/warning';\nimport { isDeepEqual } from '@mui/x-internals/isDeepEqual';\nimport { GRID_ROOT_GROUP_ID } from \"../rows/gridRowsUtils.js\";\nimport { runIf } from \"../../../utils/utils.js\";\nimport { GridStrategyGroup } from \"../../core/strategyProcessing/index.js\";\nimport { useGridSelector } from \"../../utils/useGridSelector.js\";\nimport { gridPaginationModelSelector } from \"../pagination/gridPaginationSelector.js\";\nimport { gridGetRowsParamsSelector } from \"./gridDataSourceSelector.js\";\nimport { CacheChunkManager, DataSourceRowsUpdateStrategy } from \"./utils.js\";\nimport { GridDataSourceCacheDefault } from \"./cache.js\";\nimport { GridGetRowsError, GridUpdateRowError } from \"./gridDataSourceError.js\";\nconst noopCache = {\n  clear: () => {},\n  get: () => undefined,\n  set: () => {}\n};\nfunction getCache(cacheProp, options = {}) {\n  if (cacheProp === null) {\n    return noopCache;\n  }\n  return cacheProp ?? new GridDataSourceCacheDefault(options);\n}\nexport const useGridDataSourceBase = (apiRef, props, options = {}) => {\n  const setStrategyAvailability = React.useCallback(() => {\n    apiRef.current.setStrategyAvailability(GridStrategyGroup.DataSource, DataSourceRowsUpdateStrategy.Default, props.dataSource ? () => true : () => false);\n  }, [apiRef, props.dataSource]);\n  const [currentStrategy, setCurrentStrategy] = React.useState(apiRef.current.getActiveStrategy(GridStrategyGroup.DataSource));\n  const standardRowsUpdateStrategyActive = React.useMemo(() => {\n    return currentStrategy === DataSourceRowsUpdateStrategy.Default || currentStrategy === DataSourceRowsUpdateStrategy.GroupedData;\n  }, [currentStrategy]);\n  const paginationModel = useGridSelector(apiRef, gridPaginationModelSelector);\n  const lastRequestId = React.useRef(0);\n  const onDataSourceErrorProp = props.onDataSourceError;\n  const cacheChunkManager = useLazyRef(() => {\n    if (!props.pagination) {\n      return new CacheChunkManager(paginationModel.pageSize);\n    }\n    const sortedPageSizeOptions = props.pageSizeOptions.map(option => typeof option === 'number' ? option : option.value).sort((a, b) => a - b);\n    const cacheChunkSize = Math.min(paginationModel.pageSize, sortedPageSizeOptions[0]);\n    return new CacheChunkManager(cacheChunkSize);\n  }).current;\n  const [cache, setCache] = React.useState(() => getCache(props.dataSourceCache, options.cacheOptions));\n  const fetchRows = React.useCallback(async (parentId, params) => {\n    const getRows = props.dataSource?.getRows;\n    if (!getRows) {\n      return;\n    }\n    if (parentId && parentId !== GRID_ROOT_GROUP_ID && props.signature !== 'DataGrid') {\n      options.fetchRowChildren?.([parentId]);\n      return;\n    }\n    options.clearDataSourceState?.();\n    const _ref = params || {},\n      {\n        skipCache,\n        keepChildrenExpanded\n      } = _ref,\n      getRowsParams = _objectWithoutPropertiesLoose(_ref, _excluded);\n    const fetchParams = _extends({}, gridGetRowsParamsSelector(apiRef), apiRef.current.unstable_applyPipeProcessors('getRowsParams', {}), getRowsParams);\n    const cacheKeys = cacheChunkManager.getCacheKeys(fetchParams);\n    const responses = cacheKeys.map(cacheKey => cache.get(cacheKey));\n    if (!skipCache && responses.every(response => response !== undefined)) {\n      apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n        response: CacheChunkManager.mergeResponses(responses),\n        fetchParams,\n        options: {\n          skipCache,\n          keepChildrenExpanded\n        }\n      });\n      return;\n    }\n\n    // Manage loading state only for the default strategy\n    if (standardRowsUpdateStrategyActive || apiRef.current.getRowsCount() === 0) {\n      apiRef.current.setLoading(true);\n    }\n    const requestId = lastRequestId.current + 1;\n    lastRequestId.current = requestId;\n    try {\n      const getRowsResponse = await getRows(fetchParams);\n      const cacheResponses = cacheChunkManager.splitResponse(fetchParams, getRowsResponse);\n      cacheResponses.forEach((response, key) => cache.set(key, response));\n      if (lastRequestId.current === requestId) {\n        apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n          response: getRowsResponse,\n          fetchParams,\n          options: {\n            skipCache,\n            keepChildrenExpanded\n          }\n        });\n      }\n    } catch (originalError) {\n      if (lastRequestId.current === requestId) {\n        apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n          error: originalError,\n          fetchParams,\n          options: {\n            skipCache,\n            keepChildrenExpanded\n          }\n        });\n        if (typeof onDataSourceErrorProp === 'function') {\n          onDataSourceErrorProp(new GridGetRowsError({\n            message: originalError?.message,\n            params: fetchParams,\n            cause: originalError\n          }));\n        } else if (process.env.NODE_ENV !== 'production') {\n          warnOnce(['MUI X: A call to `dataSource.getRows()` threw an error which was not handled because `onDataSourceError()` is missing.', 'To handle the error pass a callback to the `onDataSourceError` prop, for example `<DataGrid onDataSourceError={(error) => ...} />`.', 'For more detail, see https://mui.com/x/react-data-grid/server-side-data/#error-handling.'], 'error');\n        }\n      }\n    } finally {\n      if (standardRowsUpdateStrategyActive && lastRequestId.current === requestId) {\n        apiRef.current.setLoading(false);\n      }\n    }\n  }, [cacheChunkManager, cache, apiRef, standardRowsUpdateStrategyActive, props.dataSource?.getRows, onDataSourceErrorProp, options, props.signature]);\n  const handleStrategyActivityChange = React.useCallback(() => {\n    setCurrentStrategy(apiRef.current.getActiveStrategy(GridStrategyGroup.DataSource));\n  }, [apiRef]);\n  const handleDataUpdate = React.useCallback(params => {\n    if ('error' in params) {\n      apiRef.current.setRows([]);\n      return;\n    }\n    const {\n      response\n    } = params;\n    if (response.rowCount !== undefined) {\n      apiRef.current.setRowCount(response.rowCount);\n    }\n    apiRef.current.setRows(response.rows);\n    apiRef.current.unstable_applyPipeProcessors('processDataSourceRows', {\n      params: params.fetchParams,\n      response\n    }, true);\n  }, [apiRef]);\n  const dataSourceUpdateRow = props.dataSource?.updateRow;\n  const handleEditRowOption = options.handleEditRow;\n  const editRow = React.useCallback(async params => {\n    if (!dataSourceUpdateRow) {\n      return undefined;\n    }\n    try {\n      const finalRowUpdate = await dataSourceUpdateRow(params);\n      if (typeof handleEditRowOption === 'function') {\n        handleEditRowOption(params, finalRowUpdate);\n        return finalRowUpdate;\n      }\n      if (finalRowUpdate && !isDeepEqual(finalRowUpdate, params.previousRow)) {\n        // Reset the outdated cache, only if the row is _actually_ updated\n        apiRef.current.dataSource.cache.clear();\n      }\n      apiRef.current.updateNestedRows([finalRowUpdate], []);\n      return finalRowUpdate;\n    } catch (errorThrown) {\n      if (typeof onDataSourceErrorProp === 'function') {\n        onDataSourceErrorProp(new GridUpdateRowError({\n          message: errorThrown?.message,\n          params,\n          cause: errorThrown\n        }));\n      } else if (process.env.NODE_ENV !== 'production') {\n        warnOnce(['MUI X: A call to `dataSource.updateRow()` threw an error which was not handled because `onDataSourceError()` is missing.', 'To handle the error pass a callback to the `onDataSourceError` prop, for example `<DataGrid onDataSourceError={(error) => ...} />`.', 'For more detail, see https://mui.com/x/react-data-grid/server-side-data/#error-handling.'], 'error');\n      }\n      throw errorThrown; // Let the caller handle the error further\n    }\n  }, [apiRef, dataSourceUpdateRow, onDataSourceErrorProp, handleEditRowOption]);\n  const dataSourceApi = {\n    dataSource: {\n      fetchRows,\n      cache,\n      editRow\n    }\n  };\n  const debouncedFetchRows = React.useMemo(() => debounce(fetchRows, 0), [fetchRows]);\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    if (props.dataSourceCache === undefined) {\n      return;\n    }\n    const newCache = getCache(props.dataSourceCache, options.cacheOptions);\n    setCache(prevCache => prevCache !== newCache ? newCache : prevCache);\n  }, [props.dataSourceCache, options.cacheOptions]);\n  React.useEffect(() => {\n    // Return early if the proper strategy isn't set yet\n    // Context: https://github.com/mui/mui-x/issues/19650\n    if (currentStrategy !== DataSourceRowsUpdateStrategy.Default && currentStrategy !== DataSourceRowsUpdateStrategy.LazyLoading && currentStrategy !== DataSourceRowsUpdateStrategy.GroupedData) {\n      return undefined;\n    }\n    if (props.dataSource) {\n      apiRef.current.dataSource.cache.clear();\n      apiRef.current.dataSource.fetchRows();\n    }\n    return () => {\n      // ignore the current request on unmount\n      lastRequestId.current += 1;\n    };\n  }, [apiRef, props.dataSource, currentStrategy]);\n  return {\n    api: {\n      public: dataSourceApi\n    },\n    debouncedFetchRows,\n    strategyProcessor: {\n      strategyName: DataSourceRowsUpdateStrategy.Default,\n      group: 'dataSourceRowsUpdate',\n      processor: handleDataUpdate\n    },\n    setStrategyAvailability,\n    cacheChunkManager,\n    cache,\n    events: {\n      strategyAvailabilityChange: handleStrategyActivityChange,\n      sortModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows()),\n      filterModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows()),\n      paginationModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows())\n    }\n  };\n};","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","useLazyRef","debounce","warnOnce","isDeepEqual","GRID_ROOT_GROUP_ID","runIf","GridStrategyGroup","useGridSelector","gridPaginationModelSelector","gridGetRowsParamsSelector","CacheChunkManager","DataSourceRowsUpdateStrategy","GridDataSourceCacheDefault","GridGetRowsError","GridUpdateRowError","noopCache","clear","get","undefined","set","getCache","cacheProp","options","useGridDataSourceBase","apiRef","props","setStrategyAvailability","useCallback","current","DataSource","Default","dataSource","currentStrategy","setCurrentStrategy","useState","getActiveStrategy","standardRowsUpdateStrategyActive","useMemo","GroupedData","paginationModel","lastRequestId","useRef","onDataSourceErrorProp","onDataSourceError","cacheChunkManager","pagination","pageSize","sortedPageSizeOptions","pageSizeOptions","map","option","value","sort","a","b","cacheChunkSize","Math","min","cache","setCache","dataSourceCache","cacheOptions","fetchRows","parentId","params","getRows","signature","fetchRowChildren","clearDataSourceState","_ref","skipCache","keepChildrenExpanded","getRowsParams","fetchParams","unstable_applyPipeProcessors","cacheKeys","getCacheKeys","responses","cacheKey","every","response","applyStrategyProcessor","mergeResponses","getRowsCount","setLoading","requestId","getRowsResponse","cacheResponses","splitResponse","forEach","key","originalError","error","message","cause","process","env","NODE_ENV","handleStrategyActivityChange","handleDataUpdate","setRows","rowCount","setRowCount","rows","dataSourceUpdateRow","updateRow","handleEditRowOption","handleEditRow","editRow","finalRowUpdate","previousRow","updateNestedRows","errorThrown","dataSourceApi","debouncedFetchRows","isFirstRender","useEffect","newCache","prevCache","LazyLoading","api","public","strategyProcessor","strategyName","group","processor","events","strategyAvailabilityChange","sortModelChange","filterModelChange","paginationModelChange"],"sources":["C:/Users/ammar/Documents/GitHub/AD-XPDC/SRC/node_modules/@mui/x-data-grid/esm/hooks/features/dataSource/useGridDataSourceBase.js"],"sourcesContent":["'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"skipCache\", \"keepChildrenExpanded\"];\nimport * as React from 'react';\nimport useLazyRef from '@mui/utils/useLazyRef';\nimport debounce from '@mui/utils/debounce';\nimport { warnOnce } from '@mui/x-internals/warning';\nimport { isDeepEqual } from '@mui/x-internals/isDeepEqual';\nimport { GRID_ROOT_GROUP_ID } from \"../rows/gridRowsUtils.js\";\nimport { runIf } from \"../../../utils/utils.js\";\nimport { GridStrategyGroup } from \"../../core/strategyProcessing/index.js\";\nimport { useGridSelector } from \"../../utils/useGridSelector.js\";\nimport { gridPaginationModelSelector } from \"../pagination/gridPaginationSelector.js\";\nimport { gridGetRowsParamsSelector } from \"./gridDataSourceSelector.js\";\nimport { CacheChunkManager, DataSourceRowsUpdateStrategy } from \"./utils.js\";\nimport { GridDataSourceCacheDefault } from \"./cache.js\";\nimport { GridGetRowsError, GridUpdateRowError } from \"./gridDataSourceError.js\";\nconst noopCache = {\n  clear: () => {},\n  get: () => undefined,\n  set: () => {}\n};\nfunction getCache(cacheProp, options = {}) {\n  if (cacheProp === null) {\n    return noopCache;\n  }\n  return cacheProp ?? new GridDataSourceCacheDefault(options);\n}\nexport const useGridDataSourceBase = (apiRef, props, options = {}) => {\n  const setStrategyAvailability = React.useCallback(() => {\n    apiRef.current.setStrategyAvailability(GridStrategyGroup.DataSource, DataSourceRowsUpdateStrategy.Default, props.dataSource ? () => true : () => false);\n  }, [apiRef, props.dataSource]);\n  const [currentStrategy, setCurrentStrategy] = React.useState(apiRef.current.getActiveStrategy(GridStrategyGroup.DataSource));\n  const standardRowsUpdateStrategyActive = React.useMemo(() => {\n    return currentStrategy === DataSourceRowsUpdateStrategy.Default || currentStrategy === DataSourceRowsUpdateStrategy.GroupedData;\n  }, [currentStrategy]);\n  const paginationModel = useGridSelector(apiRef, gridPaginationModelSelector);\n  const lastRequestId = React.useRef(0);\n  const onDataSourceErrorProp = props.onDataSourceError;\n  const cacheChunkManager = useLazyRef(() => {\n    if (!props.pagination) {\n      return new CacheChunkManager(paginationModel.pageSize);\n    }\n    const sortedPageSizeOptions = props.pageSizeOptions.map(option => typeof option === 'number' ? option : option.value).sort((a, b) => a - b);\n    const cacheChunkSize = Math.min(paginationModel.pageSize, sortedPageSizeOptions[0]);\n    return new CacheChunkManager(cacheChunkSize);\n  }).current;\n  const [cache, setCache] = React.useState(() => getCache(props.dataSourceCache, options.cacheOptions));\n  const fetchRows = React.useCallback(async (parentId, params) => {\n    const getRows = props.dataSource?.getRows;\n    if (!getRows) {\n      return;\n    }\n    if (parentId && parentId !== GRID_ROOT_GROUP_ID && props.signature !== 'DataGrid') {\n      options.fetchRowChildren?.([parentId]);\n      return;\n    }\n    options.clearDataSourceState?.();\n    const _ref = params || {},\n      {\n        skipCache,\n        keepChildrenExpanded\n      } = _ref,\n      getRowsParams = _objectWithoutPropertiesLoose(_ref, _excluded);\n    const fetchParams = _extends({}, gridGetRowsParamsSelector(apiRef), apiRef.current.unstable_applyPipeProcessors('getRowsParams', {}), getRowsParams);\n    const cacheKeys = cacheChunkManager.getCacheKeys(fetchParams);\n    const responses = cacheKeys.map(cacheKey => cache.get(cacheKey));\n    if (!skipCache && responses.every(response => response !== undefined)) {\n      apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n        response: CacheChunkManager.mergeResponses(responses),\n        fetchParams,\n        options: {\n          skipCache,\n          keepChildrenExpanded\n        }\n      });\n      return;\n    }\n\n    // Manage loading state only for the default strategy\n    if (standardRowsUpdateStrategyActive || apiRef.current.getRowsCount() === 0) {\n      apiRef.current.setLoading(true);\n    }\n    const requestId = lastRequestId.current + 1;\n    lastRequestId.current = requestId;\n    try {\n      const getRowsResponse = await getRows(fetchParams);\n      const cacheResponses = cacheChunkManager.splitResponse(fetchParams, getRowsResponse);\n      cacheResponses.forEach((response, key) => cache.set(key, response));\n      if (lastRequestId.current === requestId) {\n        apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n          response: getRowsResponse,\n          fetchParams,\n          options: {\n            skipCache,\n            keepChildrenExpanded\n          }\n        });\n      }\n    } catch (originalError) {\n      if (lastRequestId.current === requestId) {\n        apiRef.current.applyStrategyProcessor('dataSourceRowsUpdate', {\n          error: originalError,\n          fetchParams,\n          options: {\n            skipCache,\n            keepChildrenExpanded\n          }\n        });\n        if (typeof onDataSourceErrorProp === 'function') {\n          onDataSourceErrorProp(new GridGetRowsError({\n            message: originalError?.message,\n            params: fetchParams,\n            cause: originalError\n          }));\n        } else if (process.env.NODE_ENV !== 'production') {\n          warnOnce(['MUI X: A call to `dataSource.getRows()` threw an error which was not handled because `onDataSourceError()` is missing.', 'To handle the error pass a callback to the `onDataSourceError` prop, for example `<DataGrid onDataSourceError={(error) => ...} />`.', 'For more detail, see https://mui.com/x/react-data-grid/server-side-data/#error-handling.'], 'error');\n        }\n      }\n    } finally {\n      if (standardRowsUpdateStrategyActive && lastRequestId.current === requestId) {\n        apiRef.current.setLoading(false);\n      }\n    }\n  }, [cacheChunkManager, cache, apiRef, standardRowsUpdateStrategyActive, props.dataSource?.getRows, onDataSourceErrorProp, options, props.signature]);\n  const handleStrategyActivityChange = React.useCallback(() => {\n    setCurrentStrategy(apiRef.current.getActiveStrategy(GridStrategyGroup.DataSource));\n  }, [apiRef]);\n  const handleDataUpdate = React.useCallback(params => {\n    if ('error' in params) {\n      apiRef.current.setRows([]);\n      return;\n    }\n    const {\n      response\n    } = params;\n    if (response.rowCount !== undefined) {\n      apiRef.current.setRowCount(response.rowCount);\n    }\n    apiRef.current.setRows(response.rows);\n    apiRef.current.unstable_applyPipeProcessors('processDataSourceRows', {\n      params: params.fetchParams,\n      response\n    }, true);\n  }, [apiRef]);\n  const dataSourceUpdateRow = props.dataSource?.updateRow;\n  const handleEditRowOption = options.handleEditRow;\n  const editRow = React.useCallback(async params => {\n    if (!dataSourceUpdateRow) {\n      return undefined;\n    }\n    try {\n      const finalRowUpdate = await dataSourceUpdateRow(params);\n      if (typeof handleEditRowOption === 'function') {\n        handleEditRowOption(params, finalRowUpdate);\n        return finalRowUpdate;\n      }\n      if (finalRowUpdate && !isDeepEqual(finalRowUpdate, params.previousRow)) {\n        // Reset the outdated cache, only if the row is _actually_ updated\n        apiRef.current.dataSource.cache.clear();\n      }\n      apiRef.current.updateNestedRows([finalRowUpdate], []);\n      return finalRowUpdate;\n    } catch (errorThrown) {\n      if (typeof onDataSourceErrorProp === 'function') {\n        onDataSourceErrorProp(new GridUpdateRowError({\n          message: errorThrown?.message,\n          params,\n          cause: errorThrown\n        }));\n      } else if (process.env.NODE_ENV !== 'production') {\n        warnOnce(['MUI X: A call to `dataSource.updateRow()` threw an error which was not handled because `onDataSourceError()` is missing.', 'To handle the error pass a callback to the `onDataSourceError` prop, for example `<DataGrid onDataSourceError={(error) => ...} />`.', 'For more detail, see https://mui.com/x/react-data-grid/server-side-data/#error-handling.'], 'error');\n      }\n      throw errorThrown; // Let the caller handle the error further\n    }\n  }, [apiRef, dataSourceUpdateRow, onDataSourceErrorProp, handleEditRowOption]);\n  const dataSourceApi = {\n    dataSource: {\n      fetchRows,\n      cache,\n      editRow\n    }\n  };\n  const debouncedFetchRows = React.useMemo(() => debounce(fetchRows, 0), [fetchRows]);\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    if (props.dataSourceCache === undefined) {\n      return;\n    }\n    const newCache = getCache(props.dataSourceCache, options.cacheOptions);\n    setCache(prevCache => prevCache !== newCache ? newCache : prevCache);\n  }, [props.dataSourceCache, options.cacheOptions]);\n  React.useEffect(() => {\n    // Return early if the proper strategy isn't set yet\n    // Context: https://github.com/mui/mui-x/issues/19650\n    if (currentStrategy !== DataSourceRowsUpdateStrategy.Default && currentStrategy !== DataSourceRowsUpdateStrategy.LazyLoading && currentStrategy !== DataSourceRowsUpdateStrategy.GroupedData) {\n      return undefined;\n    }\n    if (props.dataSource) {\n      apiRef.current.dataSource.cache.clear();\n      apiRef.current.dataSource.fetchRows();\n    }\n    return () => {\n      // ignore the current request on unmount\n      lastRequestId.current += 1;\n    };\n  }, [apiRef, props.dataSource, currentStrategy]);\n  return {\n    api: {\n      public: dataSourceApi\n    },\n    debouncedFetchRows,\n    strategyProcessor: {\n      strategyName: DataSourceRowsUpdateStrategy.Default,\n      group: 'dataSourceRowsUpdate',\n      processor: handleDataUpdate\n    },\n    setStrategyAvailability,\n    cacheChunkManager,\n    cache,\n    events: {\n      strategyAvailabilityChange: handleStrategyActivityChange,\n      sortModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows()),\n      filterModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows()),\n      paginationModelChange: runIf(standardRowsUpdateStrategyActive, () => debouncedFetchRows())\n    }\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}