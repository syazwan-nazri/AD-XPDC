{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _toPropertyKey from \"@babel/runtime/helpers/esm/toPropertyKey\";\nimport * as React from 'react';\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\n/**\n * Implement the Pipeline Pattern\n *\n * More information and detailed example in (TODO add link to technical doc when ready)\n *\n * Some plugins contains custom logic to enrich data provided by other plugins or components.\n * For instance, the row grouping plugin needs to add / remove the grouping columns when the grid columns are updated.\n *\n * =====================================================================================================================\n *\n * The plugin containing the custom logic must use:\n *\n * - `useGridRegisterPipeProcessor` to register their processor.\n *\n * - `apiRef.current.requestPipeProcessorsApplication` to imperatively re-apply a group.\n *   This method should be used in last resort.\n *   Most of the time, the application should be triggered by an update on the deps of the processor.\n *\n * =====================================================================================================================\n *\n * The plugin or component that needs to enrich its data must use:\n *\n * - `apiRef.current.unstable_applyPipeProcessors` to run in chain all the processors of a given group.\n *\n * - `useGridRegisterPipeApplier` to re-apply the whole pipe when requested.\n *   The applier will be called when:\n *   * a processor is registered.\n *   * `apiRef.current.requestPipeProcessorsApplication` is called for the given group.\n */\nexport const useGridPipeProcessing = apiRef => {\n  const cache = React.useRef({});\n  const isRunning = React.useRef(false);\n  const runAppliers = React.useCallback(groupCache => {\n    if (isRunning.current || !groupCache) {\n      return;\n    }\n    isRunning.current = true;\n    Object.values(groupCache.appliers).forEach(callback => {\n      callback();\n    });\n    isRunning.current = false;\n  }, []);\n  const registerPipeProcessor = React.useCallback((group, id, processor) => {\n    if (!cache.current[group]) {\n      cache.current[group] = {\n        processors: new Map(),\n        processorsAsArray: [],\n        appliers: {},\n        processorsUpdated: false\n      };\n    }\n    const groupCache = cache.current[group];\n    const oldProcessor = groupCache.processors.get(id);\n    if (oldProcessor !== processor) {\n      groupCache.processors.set(id, processor);\n      groupCache.processorsAsArray = Array.from(cache.current[group].processors.values()).filter(processorValue => processorValue !== null);\n      groupCache.processorsUpdated = true;\n    }\n    return () => {\n      cache.current[group].processors.set(id, null);\n      cache.current[group].processorsAsArray = Array.from(cache.current[group].processors.values()).filter(processorValue => processorValue !== null);\n    };\n  }, []);\n  const registerPipeApplier = React.useCallback((group, id, applier) => {\n    if (!cache.current[group]) {\n      cache.current[group] = {\n        processors: new Map(),\n        processorsAsArray: [],\n        appliers: {},\n        processorsUpdated: false\n      };\n    }\n    cache.current[group].appliers[id] = applier;\n    return () => {\n      const _appliers = cache.current[group].appliers,\n        otherAppliers = _objectWithoutPropertiesLoose(_appliers, [id].map(_toPropertyKey));\n      cache.current[group].appliers = otherAppliers;\n    };\n  }, []);\n  const requestPipeProcessorsApplication = React.useCallback(group => {\n    runAppliers(cache.current[group]);\n  }, [runAppliers]);\n  const runAppliersForPendingProcessors = React.useCallback(() => {\n    for (const group in cache.current) {\n      if (!Object.prototype.hasOwnProperty.call(cache.current, group)) {\n        continue;\n      }\n      const groupCache = cache.current[group];\n      if (groupCache.processorsUpdated) {\n        groupCache.processorsUpdated = false;\n        runAppliers(groupCache);\n      }\n    }\n  }, [runAppliers]);\n  const applyPipeProcessors = React.useCallback((...args) => {\n    const [group, value, context] = args;\n    if (!cache.current[group]) {\n      return value;\n    }\n    const processors = cache.current[group].processorsAsArray;\n    let result = value;\n    for (let i = 0; i < processors.length; i += 1) {\n      result = processors[i](result, context);\n    }\n    return result;\n  }, []);\n  const preProcessingPrivateApi = {\n    registerPipeProcessor,\n    registerPipeApplier,\n    requestPipeProcessorsApplication,\n    runAppliersForPendingProcessors\n  };\n  const preProcessingPublicApi = {\n    unstable_applyPipeProcessors: applyPipeProcessors\n  };\n  useGridApiMethod(apiRef, preProcessingPrivateApi, 'private');\n  useGridApiMethod(apiRef, preProcessingPublicApi, 'public');\n};","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_toPropertyKey","React","useGridApiMethod","useGridPipeProcessing","apiRef","cache","useRef","isRunning","runAppliers","useCallback","groupCache","current","Object","values","appliers","forEach","callback","registerPipeProcessor","group","id","processor","processors","Map","processorsAsArray","processorsUpdated","oldProcessor","get","set","Array","from","filter","processorValue","registerPipeApplier","applier","_appliers","otherAppliers","map","requestPipeProcessorsApplication","runAppliersForPendingProcessors","prototype","hasOwnProperty","call","applyPipeProcessors","args","value","context","result","i","length","preProcessingPrivateApi","preProcessingPublicApi","unstable_applyPipeProcessors"],"sources":["C:/Users/ammar/Documents/GitHub/AD-XPDC/SRC/node_modules/@mui/x-data-grid/esm/hooks/core/pipeProcessing/useGridPipeProcessing.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _toPropertyKey from \"@babel/runtime/helpers/esm/toPropertyKey\";\nimport * as React from 'react';\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\n/**\n * Implement the Pipeline Pattern\n *\n * More information and detailed example in (TODO add link to technical doc when ready)\n *\n * Some plugins contains custom logic to enrich data provided by other plugins or components.\n * For instance, the row grouping plugin needs to add / remove the grouping columns when the grid columns are updated.\n *\n * =====================================================================================================================\n *\n * The plugin containing the custom logic must use:\n *\n * - `useGridRegisterPipeProcessor` to register their processor.\n *\n * - `apiRef.current.requestPipeProcessorsApplication` to imperatively re-apply a group.\n *   This method should be used in last resort.\n *   Most of the time, the application should be triggered by an update on the deps of the processor.\n *\n * =====================================================================================================================\n *\n * The plugin or component that needs to enrich its data must use:\n *\n * - `apiRef.current.unstable_applyPipeProcessors` to run in chain all the processors of a given group.\n *\n * - `useGridRegisterPipeApplier` to re-apply the whole pipe when requested.\n *   The applier will be called when:\n *   * a processor is registered.\n *   * `apiRef.current.requestPipeProcessorsApplication` is called for the given group.\n */\nexport const useGridPipeProcessing = apiRef => {\n  const cache = React.useRef({});\n  const isRunning = React.useRef(false);\n  const runAppliers = React.useCallback(groupCache => {\n    if (isRunning.current || !groupCache) {\n      return;\n    }\n    isRunning.current = true;\n    Object.values(groupCache.appliers).forEach(callback => {\n      callback();\n    });\n    isRunning.current = false;\n  }, []);\n  const registerPipeProcessor = React.useCallback((group, id, processor) => {\n    if (!cache.current[group]) {\n      cache.current[group] = {\n        processors: new Map(),\n        processorsAsArray: [],\n        appliers: {},\n        processorsUpdated: false\n      };\n    }\n    const groupCache = cache.current[group];\n    const oldProcessor = groupCache.processors.get(id);\n    if (oldProcessor !== processor) {\n      groupCache.processors.set(id, processor);\n      groupCache.processorsAsArray = Array.from(cache.current[group].processors.values()).filter(processorValue => processorValue !== null);\n      groupCache.processorsUpdated = true;\n    }\n    return () => {\n      cache.current[group].processors.set(id, null);\n      cache.current[group].processorsAsArray = Array.from(cache.current[group].processors.values()).filter(processorValue => processorValue !== null);\n    };\n  }, []);\n  const registerPipeApplier = React.useCallback((group, id, applier) => {\n    if (!cache.current[group]) {\n      cache.current[group] = {\n        processors: new Map(),\n        processorsAsArray: [],\n        appliers: {},\n        processorsUpdated: false\n      };\n    }\n    cache.current[group].appliers[id] = applier;\n    return () => {\n      const _appliers = cache.current[group].appliers,\n        otherAppliers = _objectWithoutPropertiesLoose(_appliers, [id].map(_toPropertyKey));\n      cache.current[group].appliers = otherAppliers;\n    };\n  }, []);\n  const requestPipeProcessorsApplication = React.useCallback(group => {\n    runAppliers(cache.current[group]);\n  }, [runAppliers]);\n  const runAppliersForPendingProcessors = React.useCallback(() => {\n    for (const group in cache.current) {\n      if (!Object.prototype.hasOwnProperty.call(cache.current, group)) {\n        continue;\n      }\n      const groupCache = cache.current[group];\n      if (groupCache.processorsUpdated) {\n        groupCache.processorsUpdated = false;\n        runAppliers(groupCache);\n      }\n    }\n  }, [runAppliers]);\n  const applyPipeProcessors = React.useCallback((...args) => {\n    const [group, value, context] = args;\n    if (!cache.current[group]) {\n      return value;\n    }\n    const processors = cache.current[group].processorsAsArray;\n    let result = value;\n    for (let i = 0; i < processors.length; i += 1) {\n      result = processors[i](result, context);\n    }\n    return result;\n  }, []);\n  const preProcessingPrivateApi = {\n    registerPipeProcessor,\n    registerPipeApplier,\n    requestPipeProcessorsApplication,\n    runAppliersForPendingProcessors\n  };\n  const preProcessingPublicApi = {\n    unstable_applyPipeProcessors: applyPipeProcessors\n  };\n  useGridApiMethod(apiRef, preProcessingPrivateApi, 'private');\n  useGridApiMethod(apiRef, preProcessingPublicApi, 'public');\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}