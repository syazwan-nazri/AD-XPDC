{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { gridColumnGroupsLookupSelector, gridColumnGroupsUnwrappedModelSelector } from \"./gridColumnGroupsSelector.js\";\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\nimport { createGroupLookup, getColumnGroupsHeaderStructure, unwrapGroupingColumnModel } from \"./gridColumnGroupsUtils.js\";\nimport { useGridEvent } from \"../../utils/useGridEvent.js\";\nimport { gridColumnFieldsSelector, gridVisibleColumnFieldsSelector } from \"../columns/index.js\";\nexport const columnGroupsStateInitializer = (state, props, apiRef) => {\n  apiRef.current.caches.columnGrouping = {\n    lastColumnGroupingModel: props.columnGroupingModel\n  };\n  if (!props.columnGroupingModel) {\n    return state;\n  }\n  const columnFields = gridColumnFieldsSelector(apiRef);\n  const visibleColumnFields = gridVisibleColumnFieldsSelector(apiRef);\n  const groupLookup = createGroupLookup(props.columnGroupingModel ?? []);\n  const unwrappedGroupingModel = unwrapGroupingColumnModel(props.columnGroupingModel ?? []);\n  const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(columnFields, unwrappedGroupingModel, apiRef.current.state.pinnedColumns ?? {});\n  const maxDepth = visibleColumnFields.length === 0 ? 0 : Math.max(...visibleColumnFields.map(field => unwrappedGroupingModel[field]?.length ?? 0));\n  return _extends({}, state, {\n    columnGrouping: {\n      lookup: groupLookup,\n      unwrappedGroupingModel,\n      headerStructure: columnGroupsHeaderStructure,\n      maxDepth\n    }\n  });\n};\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n */\nexport const useGridColumnGrouping = (apiRef, props) => {\n  /**\n   * API METHODS\n   */\n  const getColumnGroupPath = React.useCallback(field => {\n    const unwrappedGroupingModel = gridColumnGroupsUnwrappedModelSelector(apiRef);\n    return unwrappedGroupingModel[field] ?? [];\n  }, [apiRef]);\n  const getAllGroupDetails = React.useCallback(() => {\n    const columnGroupLookup = gridColumnGroupsLookupSelector(apiRef);\n    return columnGroupLookup;\n  }, [apiRef]);\n  const columnGroupingApi = {\n    getColumnGroupPath,\n    getAllGroupDetails\n  };\n  useGridApiMethod(apiRef, columnGroupingApi, 'public');\n  const handleColumnIndexChange = React.useCallback(() => {\n    const unwrappedGroupingModel = unwrapGroupingColumnModel(props.columnGroupingModel ?? []);\n    apiRef.current.setState(state => {\n      const orderedFields = state.columns?.orderedFields ?? [];\n      const pinnedColumns = state.pinnedColumns ?? {};\n      const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(orderedFields, unwrappedGroupingModel, pinnedColumns);\n      return _extends({}, state, {\n        columnGrouping: _extends({}, state.columnGrouping, {\n          headerStructure: columnGroupsHeaderStructure\n        })\n      });\n    });\n  }, [apiRef, props.columnGroupingModel]);\n  const updateColumnGroupingState = React.useCallback(columnGroupingModel => {\n    apiRef.current.caches.columnGrouping.lastColumnGroupingModel = columnGroupingModel;\n    // @ts-expect-error Move this logic to `Pro` package\n    const pinnedColumns = apiRef.current.getPinnedColumns?.() ?? {};\n    const columnFields = gridColumnFieldsSelector(apiRef);\n    const visibleColumnFields = gridVisibleColumnFieldsSelector(apiRef);\n    const groupLookup = createGroupLookup(columnGroupingModel ?? []);\n    const unwrappedGroupingModel = unwrapGroupingColumnModel(columnGroupingModel ?? []);\n    const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(columnFields, unwrappedGroupingModel, pinnedColumns);\n    const maxDepth = visibleColumnFields.length === 0 ? 0 : Math.max(...visibleColumnFields.map(field => unwrappedGroupingModel[field]?.length ?? 0));\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        columnGrouping: {\n          lookup: groupLookup,\n          unwrappedGroupingModel,\n          headerStructure: columnGroupsHeaderStructure,\n          maxDepth\n        }\n      });\n    });\n  }, [apiRef]);\n  useGridEvent(apiRef, 'columnIndexChange', handleColumnIndexChange);\n  useGridEvent(apiRef, 'columnsChange', () => {\n    updateColumnGroupingState(props.columnGroupingModel);\n  });\n  useGridEvent(apiRef, 'columnVisibilityModelChange', () => {\n    updateColumnGroupingState(props.columnGroupingModel);\n  });\n\n  /**\n   * EFFECTS\n   */\n  React.useEffect(() => {\n    if (props.columnGroupingModel === apiRef.current.caches.columnGrouping.lastColumnGroupingModel) {\n      return;\n    }\n    updateColumnGroupingState(props.columnGroupingModel);\n  }, [apiRef, updateColumnGroupingState, props.columnGroupingModel]);\n};","map":{"version":3,"names":["_extends","React","gridColumnGroupsLookupSelector","gridColumnGroupsUnwrappedModelSelector","useGridApiMethod","createGroupLookup","getColumnGroupsHeaderStructure","unwrapGroupingColumnModel","useGridEvent","gridColumnFieldsSelector","gridVisibleColumnFieldsSelector","columnGroupsStateInitializer","state","props","apiRef","current","caches","columnGrouping","lastColumnGroupingModel","columnGroupingModel","columnFields","visibleColumnFields","groupLookup","unwrappedGroupingModel","columnGroupsHeaderStructure","pinnedColumns","maxDepth","length","Math","max","map","field","lookup","headerStructure","useGridColumnGrouping","getColumnGroupPath","useCallback","getAllGroupDetails","columnGroupLookup","columnGroupingApi","handleColumnIndexChange","setState","orderedFields","columns","updateColumnGroupingState","getPinnedColumns","useEffect"],"sources":["C:/Users/ammar/Documents/GitHub/AD-XPDC/SRC/node_modules/@mui/x-data-grid/esm/hooks/features/columnGrouping/useGridColumnGrouping.js"],"sourcesContent":["'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { gridColumnGroupsLookupSelector, gridColumnGroupsUnwrappedModelSelector } from \"./gridColumnGroupsSelector.js\";\nimport { useGridApiMethod } from \"../../utils/useGridApiMethod.js\";\nimport { createGroupLookup, getColumnGroupsHeaderStructure, unwrapGroupingColumnModel } from \"./gridColumnGroupsUtils.js\";\nimport { useGridEvent } from \"../../utils/useGridEvent.js\";\nimport { gridColumnFieldsSelector, gridVisibleColumnFieldsSelector } from \"../columns/index.js\";\nexport const columnGroupsStateInitializer = (state, props, apiRef) => {\n  apiRef.current.caches.columnGrouping = {\n    lastColumnGroupingModel: props.columnGroupingModel\n  };\n  if (!props.columnGroupingModel) {\n    return state;\n  }\n  const columnFields = gridColumnFieldsSelector(apiRef);\n  const visibleColumnFields = gridVisibleColumnFieldsSelector(apiRef);\n  const groupLookup = createGroupLookup(props.columnGroupingModel ?? []);\n  const unwrappedGroupingModel = unwrapGroupingColumnModel(props.columnGroupingModel ?? []);\n  const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(columnFields, unwrappedGroupingModel, apiRef.current.state.pinnedColumns ?? {});\n  const maxDepth = visibleColumnFields.length === 0 ? 0 : Math.max(...visibleColumnFields.map(field => unwrappedGroupingModel[field]?.length ?? 0));\n  return _extends({}, state, {\n    columnGrouping: {\n      lookup: groupLookup,\n      unwrappedGroupingModel,\n      headerStructure: columnGroupsHeaderStructure,\n      maxDepth\n    }\n  });\n};\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n */\nexport const useGridColumnGrouping = (apiRef, props) => {\n  /**\n   * API METHODS\n   */\n  const getColumnGroupPath = React.useCallback(field => {\n    const unwrappedGroupingModel = gridColumnGroupsUnwrappedModelSelector(apiRef);\n    return unwrappedGroupingModel[field] ?? [];\n  }, [apiRef]);\n  const getAllGroupDetails = React.useCallback(() => {\n    const columnGroupLookup = gridColumnGroupsLookupSelector(apiRef);\n    return columnGroupLookup;\n  }, [apiRef]);\n  const columnGroupingApi = {\n    getColumnGroupPath,\n    getAllGroupDetails\n  };\n  useGridApiMethod(apiRef, columnGroupingApi, 'public');\n  const handleColumnIndexChange = React.useCallback(() => {\n    const unwrappedGroupingModel = unwrapGroupingColumnModel(props.columnGroupingModel ?? []);\n    apiRef.current.setState(state => {\n      const orderedFields = state.columns?.orderedFields ?? [];\n      const pinnedColumns = state.pinnedColumns ?? {};\n      const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(orderedFields, unwrappedGroupingModel, pinnedColumns);\n      return _extends({}, state, {\n        columnGrouping: _extends({}, state.columnGrouping, {\n          headerStructure: columnGroupsHeaderStructure\n        })\n      });\n    });\n  }, [apiRef, props.columnGroupingModel]);\n  const updateColumnGroupingState = React.useCallback(columnGroupingModel => {\n    apiRef.current.caches.columnGrouping.lastColumnGroupingModel = columnGroupingModel;\n    // @ts-expect-error Move this logic to `Pro` package\n    const pinnedColumns = apiRef.current.getPinnedColumns?.() ?? {};\n    const columnFields = gridColumnFieldsSelector(apiRef);\n    const visibleColumnFields = gridVisibleColumnFieldsSelector(apiRef);\n    const groupLookup = createGroupLookup(columnGroupingModel ?? []);\n    const unwrappedGroupingModel = unwrapGroupingColumnModel(columnGroupingModel ?? []);\n    const columnGroupsHeaderStructure = getColumnGroupsHeaderStructure(columnFields, unwrappedGroupingModel, pinnedColumns);\n    const maxDepth = visibleColumnFields.length === 0 ? 0 : Math.max(...visibleColumnFields.map(field => unwrappedGroupingModel[field]?.length ?? 0));\n    apiRef.current.setState(state => {\n      return _extends({}, state, {\n        columnGrouping: {\n          lookup: groupLookup,\n          unwrappedGroupingModel,\n          headerStructure: columnGroupsHeaderStructure,\n          maxDepth\n        }\n      });\n    });\n  }, [apiRef]);\n  useGridEvent(apiRef, 'columnIndexChange', handleColumnIndexChange);\n  useGridEvent(apiRef, 'columnsChange', () => {\n    updateColumnGroupingState(props.columnGroupingModel);\n  });\n  useGridEvent(apiRef, 'columnVisibilityModelChange', () => {\n    updateColumnGroupingState(props.columnGroupingModel);\n  });\n\n  /**\n   * EFFECTS\n   */\n  React.useEffect(() => {\n    if (props.columnGroupingModel === apiRef.current.caches.columnGrouping.lastColumnGroupingModel) {\n      return;\n    }\n    updateColumnGroupingState(props.columnGroupingModel);\n  }, [apiRef, updateColumnGroupingState, props.columnGroupingModel]);\n};"],"mappings":"AAAA,YAAY;;AAEZ,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAASC,8BAA8B,EAAEC,sCAAsC,QAAQ,+BAA+B;AACtH,SAASC,gBAAgB,QAAQ,iCAAiC;AAClE,SAASC,iBAAiB,EAAEC,8BAA8B,EAAEC,yBAAyB,QAAQ,4BAA4B;AACzH,SAASC,YAAY,QAAQ,6BAA6B;AAC1D,SAASC,wBAAwB,EAAEC,+BAA+B,QAAQ,qBAAqB;AAC/F,OAAO,MAAMC,4BAA4B,GAAGA,CAACC,KAAK,EAAEC,KAAK,EAAEC,MAAM,KAAK;EACpEA,MAAM,CAACC,OAAO,CAACC,MAAM,CAACC,cAAc,GAAG;IACrCC,uBAAuB,EAAEL,KAAK,CAACM;EACjC,CAAC;EACD,IAAI,CAACN,KAAK,CAACM,mBAAmB,EAAE;IAC9B,OAAOP,KAAK;EACd;EACA,MAAMQ,YAAY,GAAGX,wBAAwB,CAACK,MAAM,CAAC;EACrD,MAAMO,mBAAmB,GAAGX,+BAA+B,CAACI,MAAM,CAAC;EACnE,MAAMQ,WAAW,GAAGjB,iBAAiB,CAACQ,KAAK,CAACM,mBAAmB,IAAI,EAAE,CAAC;EACtE,MAAMI,sBAAsB,GAAGhB,yBAAyB,CAACM,KAAK,CAACM,mBAAmB,IAAI,EAAE,CAAC;EACzF,MAAMK,2BAA2B,GAAGlB,8BAA8B,CAACc,YAAY,EAAEG,sBAAsB,EAAET,MAAM,CAACC,OAAO,CAACH,KAAK,CAACa,aAAa,IAAI,CAAC,CAAC,CAAC;EAClJ,MAAMC,QAAQ,GAAGL,mBAAmB,CAACM,MAAM,KAAK,CAAC,GAAG,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGR,mBAAmB,CAACS,GAAG,CAACC,KAAK,IAAIR,sBAAsB,CAACQ,KAAK,CAAC,EAAEJ,MAAM,IAAI,CAAC,CAAC,CAAC;EACjJ,OAAO3B,QAAQ,CAAC,CAAC,CAAC,EAAEY,KAAK,EAAE;IACzBK,cAAc,EAAE;MACde,MAAM,EAAEV,WAAW;MACnBC,sBAAsB;MACtBU,eAAe,EAAET,2BAA2B;MAC5CE;IACF;EACF,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMQ,qBAAqB,GAAGA,CAACpB,MAAM,EAAED,KAAK,KAAK;EACtD;AACF;AACA;EACE,MAAMsB,kBAAkB,GAAGlC,KAAK,CAACmC,WAAW,CAACL,KAAK,IAAI;IACpD,MAAMR,sBAAsB,GAAGpB,sCAAsC,CAACW,MAAM,CAAC;IAC7E,OAAOS,sBAAsB,CAACQ,KAAK,CAAC,IAAI,EAAE;EAC5C,CAAC,EAAE,CAACjB,MAAM,CAAC,CAAC;EACZ,MAAMuB,kBAAkB,GAAGpC,KAAK,CAACmC,WAAW,CAAC,MAAM;IACjD,MAAME,iBAAiB,GAAGpC,8BAA8B,CAACY,MAAM,CAAC;IAChE,OAAOwB,iBAAiB;EAC1B,CAAC,EAAE,CAACxB,MAAM,CAAC,CAAC;EACZ,MAAMyB,iBAAiB,GAAG;IACxBJ,kBAAkB;IAClBE;EACF,CAAC;EACDjC,gBAAgB,CAACU,MAAM,EAAEyB,iBAAiB,EAAE,QAAQ,CAAC;EACrD,MAAMC,uBAAuB,GAAGvC,KAAK,CAACmC,WAAW,CAAC,MAAM;IACtD,MAAMb,sBAAsB,GAAGhB,yBAAyB,CAACM,KAAK,CAACM,mBAAmB,IAAI,EAAE,CAAC;IACzFL,MAAM,CAACC,OAAO,CAAC0B,QAAQ,CAAC7B,KAAK,IAAI;MAC/B,MAAM8B,aAAa,GAAG9B,KAAK,CAAC+B,OAAO,EAAED,aAAa,IAAI,EAAE;MACxD,MAAMjB,aAAa,GAAGb,KAAK,CAACa,aAAa,IAAI,CAAC,CAAC;MAC/C,MAAMD,2BAA2B,GAAGlB,8BAA8B,CAACoC,aAAa,EAAEnB,sBAAsB,EAAEE,aAAa,CAAC;MACxH,OAAOzB,QAAQ,CAAC,CAAC,CAAC,EAAEY,KAAK,EAAE;QACzBK,cAAc,EAAEjB,QAAQ,CAAC,CAAC,CAAC,EAAEY,KAAK,CAACK,cAAc,EAAE;UACjDgB,eAAe,EAAET;QACnB,CAAC;MACH,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,EAAE,CAACV,MAAM,EAAED,KAAK,CAACM,mBAAmB,CAAC,CAAC;EACvC,MAAMyB,yBAAyB,GAAG3C,KAAK,CAACmC,WAAW,CAACjB,mBAAmB,IAAI;IACzEL,MAAM,CAACC,OAAO,CAACC,MAAM,CAACC,cAAc,CAACC,uBAAuB,GAAGC,mBAAmB;IAClF;IACA,MAAMM,aAAa,GAAGX,MAAM,CAACC,OAAO,CAAC8B,gBAAgB,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/D,MAAMzB,YAAY,GAAGX,wBAAwB,CAACK,MAAM,CAAC;IACrD,MAAMO,mBAAmB,GAAGX,+BAA+B,CAACI,MAAM,CAAC;IACnE,MAAMQ,WAAW,GAAGjB,iBAAiB,CAACc,mBAAmB,IAAI,EAAE,CAAC;IAChE,MAAMI,sBAAsB,GAAGhB,yBAAyB,CAACY,mBAAmB,IAAI,EAAE,CAAC;IACnF,MAAMK,2BAA2B,GAAGlB,8BAA8B,CAACc,YAAY,EAAEG,sBAAsB,EAAEE,aAAa,CAAC;IACvH,MAAMC,QAAQ,GAAGL,mBAAmB,CAACM,MAAM,KAAK,CAAC,GAAG,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGR,mBAAmB,CAACS,GAAG,CAACC,KAAK,IAAIR,sBAAsB,CAACQ,KAAK,CAAC,EAAEJ,MAAM,IAAI,CAAC,CAAC,CAAC;IACjJb,MAAM,CAACC,OAAO,CAAC0B,QAAQ,CAAC7B,KAAK,IAAI;MAC/B,OAAOZ,QAAQ,CAAC,CAAC,CAAC,EAAEY,KAAK,EAAE;QACzBK,cAAc,EAAE;UACde,MAAM,EAAEV,WAAW;UACnBC,sBAAsB;UACtBU,eAAe,EAAET,2BAA2B;UAC5CE;QACF;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,EAAE,CAACZ,MAAM,CAAC,CAAC;EACZN,YAAY,CAACM,MAAM,EAAE,mBAAmB,EAAE0B,uBAAuB,CAAC;EAClEhC,YAAY,CAACM,MAAM,EAAE,eAAe,EAAE,MAAM;IAC1C8B,yBAAyB,CAAC/B,KAAK,CAACM,mBAAmB,CAAC;EACtD,CAAC,CAAC;EACFX,YAAY,CAACM,MAAM,EAAE,6BAA6B,EAAE,MAAM;IACxD8B,yBAAyB,CAAC/B,KAAK,CAACM,mBAAmB,CAAC;EACtD,CAAC,CAAC;;EAEF;AACF;AACA;EACElB,KAAK,CAAC6C,SAAS,CAAC,MAAM;IACpB,IAAIjC,KAAK,CAACM,mBAAmB,KAAKL,MAAM,CAACC,OAAO,CAACC,MAAM,CAACC,cAAc,CAACC,uBAAuB,EAAE;MAC9F;IACF;IACA0B,yBAAyB,CAAC/B,KAAK,CAACM,mBAAmB,CAAC;EACtD,CAAC,EAAE,CAACL,MAAM,EAAE8B,yBAAyB,EAAE/B,KAAK,CAACM,mBAAmB,CAAC,CAAC;AACpE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}